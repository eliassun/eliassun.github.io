== Create and SSH =============================
1. Set firewall in VPC
2. ssh-keygen -t rsa -b 4096 -C username
3. put username.pub to Compute Engine Meta SSH
4. Create VM
5. ssh into vm with the "username"

== Service Account ==========================
1. Create Service Account from IAM, grant the service account with the permission
2. Create an VM with the service account
3. Check the service account in VM by the command
   gcloud config list
4. Check the service, e.g. check the secrets in the secrets manager by
    gcloud secrets list
5. Show a secret by
     gcloud secrets versions access latest --secret=secret_name_from_list_above
     
6. gcp python packages
      gcloud googleapis-common-protos  google-apitools google-auth
      
   pip3 install gcloud
   pip3 install googleapis-common-protos
   pip3 install google-apitools
   pip3 install google-auth
   pip3 install google-cloud-secret-manager
     
Python script:
from google.cloud import secretmanager

client = secretmanager.SecretManagerServiceClient()
project_id = 'xxxxx'
key_name = client.secret_version_path(project_id, 'key', '1')
ret = client.access_secret_version(name=key_name)
key_val = ret.payload.data.decode('UTF-8')

7. GCP gcloud command line
Download the keyfile of a service account.
export GOOGLE_APPLICATION_CREDENTIALS=/path/to/keyfile
gcloud config set project [PROJECT_ID]
Run commands, e.g. :    gcloud compute instances list


8. Check GCP metadata after SSH into
curl -H Metadata-Flavor:Google http://metadata.google.internal/computeMetadata/v1/instance/

